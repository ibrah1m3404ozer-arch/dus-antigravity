    const handleRefreshPrices = async () => {
        setLoading(true);
        let updatedCount = 0;

        try {
            // 1. Update BIST Stocks - Finnhub API (Free, No CORS!)
            const finnhubKey = 'ctblmspr01qpcgu6alogctblmspr01qpcgu6alp0'; // Free demo key
            
            for (const asset of assets.filter(a => a.type === 'stock')) {
                try {
                    const symbol = `${asset.symbol}.IS`;
                    const response = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${finnhubKey}`);
                    const data = await response.json();
                    
                    if (data.c && data.c > 0) {
                        await saveAsset({ ...asset, currentPrice: data.c });
                        updatedCount++;
                    }
                    
                    await new Promise(resolve => setTimeout(resolve, 1000));
                } catch (error) {
                    console.error(`${asset.symbol} error:`, error);
                }
            }

            // 2. Update Forex & Crypto - Alpha Vantage
            const apiKey = localStorage.getItem('alphaVantageKey');
            
            if (apiKey) {
                for (const asset of assets.filter(a => a.type === 'commodity')) {
                    try {
                        let price = null;
                        
                        if (['USD', 'EUR', 'GBP', 'JPY', 'CHF'].includes(asset.symbol)) {
                            const response = await fetch(`https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=${asset.symbol}&to_currency=TRY&apikey=${apiKey}`);
                            const data = await response.json();
                            if (data['Realtime Currency Exchange Rate']) {
                                price = parseFloat(data['Realtime Currency Exchange Rate']['5. Exchange Rate']);
                            }
                        }
                        else if (['BTC', 'ETH', 'BNB', 'XRP', 'ADA'].includes(asset.symbol)) {
                            const response = await fetch(`https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=${asset.symbol}&to_currency=USD&apikey=${apiKey}`);
                            const data = await response.json();
                            if (data['Realtime Currency Exchange Rate']) {
                                const usdPrice = parseFloat(data['Realtime Currency Exchange Rate']['5. Exchange Rate']);
                                const usdTryResponse = await fetch(`https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=TRY&apikey=${apiKey}`);
                                const usdTryData = await usdTryResponse.json();
                                price = usdPrice * parseFloat(usdTryData['Realtime Currency Exchange Rate']['5. Exchange Rate']);
                            }
                        }

                        if (price) {
                            await saveAsset({ ...asset, currentPrice: price });
                            updatedCount++;
                        }

                        await new Promise(resolve => setTimeout(resolve, 12500));
                    } catch (error) {
                        console.error(`${asset.symbol} error:`, error);
                    }
                }
            }

            loadAssets();
            showToast(`✅ ${updatedCount} varlık güncellendi!`);
        } catch (error) {
            showToast('Güncelleme hatası', 'error');
        } finally {
            setLoading(false);
        }
    };
